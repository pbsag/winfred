; Do not change filenames or add or remove FILEI/FILEO statements using an editor. Use Cube/Application Manager.
RUN PGM=NETWORK MSG='Compute SpeedCap Class'


; example of use: v=NEWSPDCAPTABLE(1,25)
; look for 25 in the SPDCAPCLS field and returns the CAPACITY value


FILEI LINKI[1] = "{CATALOG_DIR}\Output\{Scenario_FullName}\Final_AT_{Year}{Alternative}.NET"
FILEI LOOKUPI[1] = "{CATALOG_DIR}\Calibration Constants\SPDCAPCLASS.dbf"
FILEO NETO = "{CATALOG_DIR}\Output\{Scenario_FullName}\01NET{Year}A.NET"


;Use this phase to modify data as it is read, such as recoding node numbers.
      ; MO=1,2,3,4,                                     ; write MW to table 1
       ;NAME= TIME,DISTANCE,TERM,TOTTIME                               ; name table 1 "TIME"





PROCESS  PHASE=LINKMERGE  

;Distance Checks
;DISTANCE=LENGTH
DISTANCE =(1/1609)*SQRT((a.X-b.X)^2+(a.Y-b.Y)^2)
IF (FACTYPE=12) DISTANCE=0.01

;SPDCAPCLS COMPUTATION

IF (FACTYPE=1&LUD=1) SPDCAPCLS=11

IF (FACTYPE=1&LUD=2) SPDCAPCLS=12

IF (FACTYPE=1&LUD=3) SPDCAPCLS=13

IF (FACTYPE=1&LUD=2) SPDCAPCLS=12

IF (FACTYPE=2&LUD=1) SPDCAPCLS=21

IF (FACTYPE=2&LUD=2) SPDCAPCLS=22

IF (FACTYPE=2&LUD=3) SPDCAPCLS=23

IF (FACTYPE=3&LUD=1) SPDCAPCLS=31

IF (FACTYPE=3&LUD=2) SPDCAPCLS=32

IF (FACTYPE=3&LUD=3) SPDCAPCLS=33

IF (FACTYPE=4&LUD=1) SPDCAPCLS=41

IF (FACTYPE=4&LUD=2) SPDCAPCLS=42

IF (FACTYPE=4&LUD=3) SPDCAPCLS=43

IF (FACTYPE=5&LUD=1) SPDCAPCLS=51

IF (FACTYPE=5&LUD=2) SPDCAPCLS=52

IF (FACTYPE=5&LUD=3) SPDCAPCLS=53

IF (FACTYPE=6&LUD=1) SPDCAPCLS=61

IF (FACTYPE=6&LUD=2) SPDCAPCLS=62
IF (FACTYPE=6&LUD=3) SPDCAPCLS=63

IF (FACTYPE=7&LUD=1) SPDCAPCLS=71

IF (FACTYPE=7&LUD=2) SPDCAPCLS=72

IF (FACTYPE=7&LUD=3) SPDCAPCLS=73

IF (FACTYPE=8&LUD=1) SPDCAPCLS=81

IF (FACTYPE=8&LUD=2) SPDCAPCLS=82

IF (FACTYPE=8&LUD=3) SPDCAPCLS=83

IF (FACTYPE=9&LUD=1) SPDCAPCLS=91

IF (FACTYPE=9&LUD=2) SPDCAPCLS=92

IF (FACTYPE=9&LUD=3) SPDCAPCLS=93

IF (FACTYPE=10&LUD=1) SPDCAPCLS=101

IF (FACTYPE=10&LUD=2) SPDCAPCLS=102

IF (FACTYPE=10&LUD=3) SPDCAPCLS=103

IF (FACTYPE=10&LUD=1) SPDCAPCLS=101

IF (FACTYPE=10&LUD=2) SPDCAPCLS=102

IF (FACTYPE=10&LUD=3) SPDCAPCLS=103

IF (FACTYPE=11&LUD=1) SPDCAPCLS=111

IF (FACTYPE=11&LUD=2) SPDCAPCLS=112

IF (FACTYPE=11&LUD=3) SPDCAPCLS=113

IF (FACTYPE=12&LUD=1) SPDCAPCLS=121

IF (FACTYPE=12&LUD=2) SPDCAPCLS=122

IF (FACTYPE=12&LUD=3) SPDCAPCLS=123

ENDPROCESS





ENDRUN
